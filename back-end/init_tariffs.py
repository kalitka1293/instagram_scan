#!/usr/bin/env python3
"""
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–∞—Ä–∏—Ñ–æ–≤ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
"""

from database import SessionLocal
import crud
import schemas

def init_tariffs():
    """–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤"""
    db = SessionLocal()
    
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞—Ä–∏—Ñ—ã
        existing_tariffs = crud.get_all_tariffs(db, active_only=False)
        if existing_tariffs:
            print(f"‚úÖ –¢–∞—Ä–∏—Ñ—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç ({len(existing_tariffs)} —à—Ç.)")
            return
        
        # –°–æ–∑–¥–∞–µ–º —Ç–∞—Ä–∏—Ñ—ã –∏–∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
        tariffs_data = [
            {
                "name": "–î–µ–º–æ",
                "price": 19.0,
                "duration_days": 1,
                "requests_count": None,
                "subtitle": "–ü–æ–ø—Ä–æ–±—É–π –≤–µ—Å—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–µ—Ä–≤–∏—Å–∞ –≤—Å–µ–≥–æ –∑–∞ 19‚ÇΩ –Ω–∞ 24 —á–∞—Å–∞!",
                "features": [
                    "–í—Å—ë —Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –∑–∞ –∫–æ–ø–µ–π–∫–∏ ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å—É",
                    "–ö—Ç–æ –≤ —Ç–µ–Ω–∏? ‚Äî —Ä–∞—Å–∫—Ä–æ–π —Å–∫—Ä—ã—Ç—ã—Ö –ø–æ–∫–ª–æ–Ω–Ω–∏–∫–æ–≤ –∏ —Ç–∞–π–Ω—ã–µ —Å–≤—è–∑–∏",
                    "–ë—ã—Å—Ç—Ä–æ, –¥—ë—à–µ–≤–æ, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–æ—á–Ω–æ!"
                ],
                "is_demo": True,
                "next_tariff_price": 999.0
            },
            {
                "name": "–≠–∫–æ",
                "price": 249.0,
                "duration_days": 2,
                "requests_count": None,
                "subtitle": "2 –¥–Ω—è –º–æ—â–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –¥–µ—à–µ–≤–ª–µ, —á–µ–º –æ–±–µ–¥ –≤ –∫–∞—Ñ–µ!",
                "features": [
                    "–õ–∞–π–∫–∏ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚Äì –£–≤–∏–¥–∏—à—å, –∫—Ç–æ –∞–∫—Ç–∏–≤–Ω–µ–µ –≤—Å–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç",
                    "–≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ ‚Äì –í—Å—è –∫–ª—é—á–µ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞ 2 –¥–Ω—è",
                    "–°–∫—Ä—ã—Ç—ã–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª–∏ ‚Äì –ö—Ç–æ —Å–ª–µ–¥–∏—Ç –∑–∞ –∞–∫–∫–∞—É–Ω—Ç–æ–º, –Ω–µ –ø–æ–¥–ø–∏—Å—ã–≤–∞—è—Å—å"
                ]
            },
            {
                "name": "–°—É—Ç–æ—á–Ω—ã–π",
                "price": 499.0,
                "duration_days": 1,
                "requests_count": None,
                "subtitle": "24 —á–∞—Å–∞ ‚Äî –∏ —Ç—ã –∑–Ω–∞–µ—à—å –í–°–Å.",
                "features": [
                    "–ú–∞–∫—Å–∏–º—É–º –¥–∞–Ω–Ω—ã—Ö –∑–∞ 1 –¥–µ–Ω—å! ‚Äî –ø–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: –ª–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ø–æ–¥–ø–∏—Å–∫–∏",
                    "–ü–æ–¥–ø–∏—Å–Ω–æ–π —Ä–µ–π—Ç–∏–Ω–≥ - –ê–Ω–∞–ª–∏–∑ —Å–∞–º—ã—Ö –∑–Ω–∞—á–∏–º—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫",
                    "–¢–æ–ª—å–∫–æ —Ñ–∞–∫—Ç—ã ‚Äî –±–µ–∑ –≤–æ–¥—ã ‚Äî –≤—Å—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ"
                ]
            },
            {
                "name": "–≠–∫—Å–∫–ª—é–∑–∏–≤",
                "price": 999.0,
                "duration_days": 10,
                "requests_count": None,
                "subtitle": "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ 10 –¥–Ω–µ–π!",
                "features": [
                    "–ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ —Å–∏—Ç—É–∞—Ü–∏–µ–π ‚Äî 10 –¥–Ω–µ–π –±–µ–∑–ª–∏–º–∏—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º",
                    "–†–∞—Å–∫—Ä–æ–π, —Å –∫–µ–º –ø—Ä–æ—Ñ–∏–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å–∫—Ä—ã—Ç–Ω–æ",
                    "–¢–≤–æ–π –ª–∏—á–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ü–µ–ª–∏ –¥–µ–Ω—å –∑–∞ –¥–Ω—ë–º"
                ]
            },
            {
                "name": "–§—É–ª–ª",
                "price": 349.0,
                "duration_days": 4,
                "requests_count": None,
                "subtitle": "–í—Å—ë, —á—Ç–æ —Å–∫—Ä—ã—Ç–æ - —Ç–µ–ø–µ—Ä—å –≤ —Ç–≤–æ–∏—Ö —Ä—É–∫–∞—Ö",
                "features": [
                    "–ì–∏–±–∫–∏–π —Å—Ä–æ–∫ ‚Äì –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ü–µ–Ω—ã –∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç—É–ø–∞",
                    "–í—Å—ë, —á—Ç–æ —Å–∫—Ä—ã—Ç–æ ‚Äî –ø–æ–¥–ø–∏—Å–∫–∏, –ª–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ ‚Äî –ø–æ–ª–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥",
                    "–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ ‚Äî 4 –¥–Ω—è ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –≤—Å—ë –Ω–∞–π—Ç–∏"
                ]
            },
            {
                "name": "–ö–æ–º–±–æ 5",
                "price": 699.0,
                "duration_days": None,
                "requests_count": 5,
                "subtitle": "5 —Ç–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã",
                "features": [
                    "5 —Ç–æ—á–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Äì –ü–æ–ª—É—á–∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–∞–º—ã–µ –≤–∞–∂–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã",
                    "–ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äì –û–ø–ª–∞—Ç–∏ –æ–¥–∏–Ω —Ä–∞–∑ –∏ –∏—Å–ø–æ–ª—å–∑—É–π –∫–æ–≥–¥–∞ —É–≥–æ–¥–Ω–æ",
                    "–õ—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ ‚Äì –õ–∞–π–∫–∏, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äì —á—Ç–æ —É–≥–æ–¥–Ω–æ –∑–∞ —Ä–∞–∑"
                ]
            },
            {
                "name": "–ö–æ–º–±–æ 10",
                "price": 1099.0,
                "duration_days": None,
                "requests_count": 10,
                "subtitle": "10 –∑–∞–ø—Ä–æ—Å–æ–≤ = –∞–±—Å–æ–ª—é—Ç–Ω–∞—è —è—Å–Ω–æ—Å—Ç—å. –ë–µ—Ä–∏ –∏ —É–∑–Ω–∞–≤–∞–π –í–°–Å!",
                "features": [
                    "–í 2 —Ä–∞–∑–∞ –º–æ—â–Ω–µ–µ! ‚Äî 10 –∑–∞–ø—Ä–æ—Å–æ–≤ = –ø–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ",
                    "–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - –ú–∞–∫—Å–∏–º—É–º –¥–∞–Ω–Ω—ã—Ö –∑–∞ –º–∏–Ω–∏–º—É–º –∑–∞–ø—Ä–æ—Å–æ–≤",
                    "–≠–∫–æ–Ω–æ–º–∏—è 300‚ÇΩ –ø—Ä–∏ –¥–≤–æ–π–Ω–æ–º –æ–±—ä—ë–º–µ!"
                ]
            }
        ]
        
        created_count = 0
        for tariff_data in tariffs_data:
            try:
                tariff_create = schemas.TariffCreate(**tariff_data)
                created_tariff = crud.create_tariff(db, tariff_create)
                print(f"‚úÖ –°–æ–∑–¥–∞–Ω —Ç–∞—Ä–∏—Ñ: {created_tariff.name} - {created_tariff.price}‚ÇΩ")
                created_count += 1
            except Exception as e:
                print(f"‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞—Ä–∏—Ñ–∞ {tariff_data['name']}: {e}")
        
        print(f"üéâ –°–æ–∑–¥–∞–Ω–æ —Ç–∞—Ä–∏—Ñ–æ–≤: {created_count}/{len(tariffs_data)}")
        
    except Exception as e:
        print(f"‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞—Ä–∏—Ñ–æ–≤: {e}")
        db.rollback()
    finally:
        db.close()

if __name__ == "__main__":
    init_tariffs()

